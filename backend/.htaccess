# CORS Headers - Add before any rewrite rules
<IfModule mod_headers.c>
    # Set CORS headers for all requests
    Header always set Access-Control-Allow-Origin "https://tedara.com"
    Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS, PATCH"
    Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, Accept, X-CSRF-TOKEN"
    Header always set Access-Control-Allow-Credentials "true"
    Header always set Access-Control-Max-Age "86400"
</IfModule>

# Laravel redirect configuration for GoDaddy
RewriteEngine On

# Handle requests to /backend/public/ path (your current URL structure)
RewriteCond %{REQUEST_URI} ^/backend/public/(.*)$
RewriteRule ^backend/public/(.*)$ public/$1 [L]

# Handle requests to /backend/public path (without trailing slash)
RewriteCond %{REQUEST_URI} ^/backend/public$
RewriteRule ^backend/public$ public/ [L,R=301]

# Handle root requests (for shorter URLs like api.tedara.com/api/test)
# Redirect all other requests to the public directory
RewriteCond %{REQUEST_URI} !^/public/
RewriteCond %{REQUEST_URI} !^/backend/public/
RewriteCond %{REQUEST_URI} !^/test-root\.php$
RewriteCond %{REQUEST_URI} !^/test\.html$
RewriteRule ^(.*)$ public/$1 [L]

# Set default directory index to our custom index.php
DirectoryIndex index.php

# Enable mod_rewrite
<IfModule mod_rewrite.c>
    RewriteEngine On
</IfModule>